<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SRI KRISHNA GHAR | Order Food Online</title>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --accent: #f59e0b;
            --success: #10b981;
            --bg-gradient: linear-gradient(135deg, #0f172a 0%, #1e1b4b 100%);
            --glass: rgba(255, 255, 255, 0.08);
            --glass-border: rgba(255, 255, 255, 0.12);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Plus Jakarta Sans', sans-serif;
        }

        body {
            background: var(--bg-gradient);
            background-attachment: fixed;
            min-height: 100vh;
            color: #f8fafc;
            padding: 20px;
            overflow-x: hidden;
        }

        body::before {
            content: "";
            position: fixed;
            top: -10%;
            right: -10%;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(99, 102, 241, 0.15) 0%, transparent 70%);
            z-index: -1;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 40px 20px;
            margin-bottom: 40px;
            animation: fadeInDown 0.8s ease-out;
        }

        .logo {
            font-size: 2.5rem;
            font-weight: 800;
            letter-spacing: -1px;
            background: linear-gradient(to right, #fff, #94a3b8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 8px;
        }

        .subtitle {
            font-size: 1rem;
            color: #94a3b8;
            text-transform: uppercase;
            letter-spacing: 3px;
            font-weight: 600;
        }

        /* Category Tabs */
        .category-tabs {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .category-tab {
            background: var(--glass);
            backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            padding: 12px 28px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .category-tab:hover, .category-tab.active {
            background: var(--primary);
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        /* Food Grid */
        .food-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .food-card {
            background: var(--glass);
            backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
            position: relative;
        }

        .food-card:hover {
            transform: translateY(-8px);
            background: rgba(255, 255, 255, 0.12);
            border-color: var(--primary);
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        .food-image {
            width: 100%;
            height: 180px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            position: relative;
        }

        .veg-badge, .nonveg-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            width: 20px;
            height: 20px;
            border: 2px solid;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .veg-badge {
            border-color: #10b981;
        }

        .veg-badge::after {
            content: "";
            width: 10px;
            height: 10px;
            background: #10b981;
            border-radius: 50%;
        }

        .nonveg-badge {
            border-color: #ef4444;
        }

        .nonveg-badge::after {
            content: "";
            width: 0;
            height: 0;
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-bottom: 10px solid #ef4444;
        }

        .food-content {
            padding: 20px;
        }

        .food-name {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 8px;
            color: #fff;
        }

        .food-description {
            font-size: 0.9rem;
            color: #94a3b8;
            margin-bottom: 15px;
            line-height: 1.4;
        }

        .food-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .food-price {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--accent);
        }

        .order-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 24px;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }

        .order-btn:hover {
            background: var(--primary-dark);
            transform: scale(1.05);
        }

        /* Success Message */
        .success-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #fff;
            color: #0f172a;
            padding: 50px;
            border-radius: 40px;
            text-align: center;
            width: 90%;
            max-width: 500px;
            z-index: 1000;
            display: none;
            box-shadow: 0 0 100px rgba(0,0,0,0.5);
        }

        .success-item {
            font-size: 2rem;
            font-weight: 800;
            color: var(--primary);
            margin: 20px 0;
        }

        .close-btn {
            width: 100%;
            background: var(--primary);
            color: white;
            border: none;
            padding: 16px;
            border-radius: 16px;
            font-weight: 700;
            cursor: pointer;
            margin-top: 20px;
        }

        .footer {
            margin-top: 50px;
            text-align: center;
            color: #64748b;
            font-size: 0.9rem;
            padding-bottom: 30px;
        }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

<div class="container">
    <header class="header">
        <div class="logo">üçõ SRI KRISHNA GHAR</div>
        <div class="subtitle">Authentic Indian Cuisine</div>
    </header>

    <div class="category-tabs">
        <div class="category-tab active" onclick="filterCategory('all')">All Items</div>
        <div class="category-tab" onclick="filterCategory('starters')">Starters</div>
        <div class="category-tab" onclick="filterCategory('mains')">Main Course</div>
        <div class="category-tab" onclick="filterCategory('breads')">Breads</div>
        <div class="category-tab" onclick="filterCategory('beverages')">Beverages</div>
    </div>

    <div id="foodGrid" class="food-grid"></div>

    <div id="successMessage" class="success-message">
        <div style="font-size: 50px;">‚úÖ</div>
        <h2 style="margin-top:10px">Order Successful!</h2>
        <div class="success-item" id="successItem">-</div>
        <p style="line-height: 1.6; color: #475569;">
            Your payment was successful.<br>
            <strong>Your order will be prepared shortly.</strong>
        </p>
        <button class="close-btn" onclick="closeSuccess()">Continue Ordering</button>
    </div>

    <footer class="footer">
        <p>üîí Secure Encrypted Payments powered by Razorpay</p>
    </footer>
</div>

<script>
    const API_BASE = window.location.origin;

    const menuItems = [
        // Starters
        { id: 1, name: "Paneer Tikka", price: 180, category: "starters", emoji: "üßÄ", type: "veg", description: "Grilled cottage cheese marinated in spices" },
        { id: 2, name: "Chicken Tikka", price: 220, category: "starters", emoji: "üçó", type: "nonveg", description: "Tender chicken pieces in tandoori marinade" },
        { id: 3, name: "Samosa", price: 40, category: "starters", emoji: "ü•ü", type: "veg", description: "Crispy pastry filled with spiced potatoes" },
        { id: 4, name: "Spring Rolls", price: 120, category: "starters", emoji: "üåØ", type: "veg", description: "Crunchy rolls with vegetable filling" },
        
        // Main Course
        { id: 5, name: "Butter Chicken", price: 280, category: "mains", emoji: "üçõ", type: "nonveg", description: "Creamy tomato-based chicken curry" },
        { id: 6, name: "Paneer Butter Masala", price: 220, category: "mains", emoji: "üç≤", type: "veg", description: "Rich cottage cheese in creamy gravy" },
        { id: 7, name: "Dal Makhani", price: 180, category: "mains", emoji: "ü•ò", type: "veg", description: "Black lentils cooked overnight with spices" },
        { id: 8, name: "Chicken Biryani", price: 250, category: "mains", emoji: "üçö", type: "nonveg", description: "Fragrant rice with tender chicken pieces" },
        { id: 9, name: "Veg Biryani", price: 200, category: "mains", emoji: "üç±", type: "veg", description: "Aromatic rice with mixed vegetables" },
        { id: 10, name: "Mutton Rogan Josh", price: 320, category: "mains", emoji: "ü•©", type: "nonveg", description: "Kashmiri mutton curry with aromatic spices" },
        
        // Breads
        { id: 11, name: "Butter Naan", price: 50, category: "breads", emoji: "ü´ì", type: "veg", description: "Soft flatbread brushed with butter" },
        { id: 12, name: "Garlic Naan", price: 60, category: "breads", emoji: "üßÑ", type: "veg", description: "Naan topped with garlic and herbs" },
        { id: 13, name: "Tandoori Roti", price: 30, category: "breads", emoji: "ü•ñ", type: "veg", description: "Whole wheat flatbread from tandoor" },
        { id: 14, name: "Laccha Paratha", price: 50, category: "breads", emoji: "ü•ê", type: "veg", description: "Layered flatbread with crispy texture" },
        
        // Beverages
        { id: 15, name: "Masala Chai", price: 30, category: "beverages", emoji: "‚òï", type: "veg", description: "Traditional Indian spiced tea" },
        { id: 16, name: "Mango Lassi", price: 80, category: "beverages", emoji: "ü•§", type: "veg", description: "Sweet yogurt drink with mango" },
        { id: 17, name: "Fresh Lime Soda", price: 50, category: "beverages", emoji: "üçã", type: "veg", description: "Refreshing lime with soda water" },
        { id: 18, name: "Buttermilk", price: 40, category: "beverages", emoji: "ü•õ", type: "veg", description: "Spiced yogurt drink" }
    ];

    let currentCategory = 'all';

    function renderMenu() {
        const grid = document.getElementById('foodGrid');
        const filtered = currentCategory === 'all' 
            ? menuItems 
            : menuItems.filter(item => item.category === currentCategory);

        grid.innerHTML = filtered.map(item => `
            <div class="food-card" onclick="orderItem(${item.id})">
                <div class="food-image">
                    <div class="${item.type}-badge"></div>
                    <span>${item.emoji}</span>
                </div>
                <div class="food-content">
                    <div class="food-name">${item.name}</div>
                    <div class="food-description">${item.description}</div>
                    <div class="food-footer">
                        <div class="food-price">‚Çπ${item.price}</div>
                        <button class="order-btn" onclick="event.stopPropagation(); orderItem(${item.id})">Order Now</button>
                    </div>
                </div>
            </div>
        `).join('');
    }

    function filterCategory(category) {
        currentCategory = category;
        document.querySelectorAll('.category-tab').forEach(tab => {
            tab.classList.remove('active');
        });
        event.target.classList.add('active');
        renderMenu();
    }

    async function orderItem(itemId) {
        const item = menuItems.find(i => i.id === itemId);
        if (!item) return;

        try {
            // Create order with Razorpay
            const response = await fetch(`${API_BASE}/api/create-direct-order`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    item_name: item.name,
                    amount: item.price
                })
            });

            const orderData = await response.json();
            if (!response.ok) {
                alert(orderData.error || 'Failed to create order');
                return;
            }

            const options = {
                key: orderData.key,
                amount: orderData.amount,
                currency: orderData.currency,
                name: 'SRI KRISHNA GHAR',
                description: item.name,
                order_id: orderData.order_id,
                handler: function (response) {
                    showSuccess(item.name);
                },
                theme: { color: '#6366f1' }
            };

            const razorpay = new Razorpay(options);
            razorpay.open();
        } catch (error) {
            alert('Payment error: ' + error.message);
        }
    }

    function showSuccess(itemName) {
        document.getElementById('successItem').textContent = itemName;
        document.getElementById('successMessage').style.display = 'block';
    }

    function closeSuccess() {
        document.getElementById('successMessage').style.display = 'none';
    }

    window.onload = renderMenu;
</script>
</body>
</html>
